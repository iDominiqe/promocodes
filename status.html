<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–æ–≤ Warframe üîß</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <link rel="stylesheet" href="styles.css?v=1.1">
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ */
        .status-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .status-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            border-left: 5px solid #10b981;
        }

        .status-card.response-time {
            border-left-color: #f59e0b;
        }

        .status-card.players {
            border-left-color: #667eea;
        }

        .status-card h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.2em;
        }

        .status-card p {
            font-size: 1.5em;
            font-weight: bold;
            margin: 0.5rem 0;
            color: #1f2937;
        }

        .server-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #10b981;
            transition: all 0.3s ease;
        }

        .server-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
        }

        .server-card.offline {
            border-left-color: #ef4444;
            opacity: 0.8;
        }

        .server-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .server-header h3 {
            margin: 0;
            font-size: 1.1em;
        }

        .status-indicator {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .status-indicator.online {
            background: #10b981;
            color: white;
        }

        .status-indicator.offline {
            background: #ef4444;
            color: white;
        }

        .server-region {
            color: #6b7280;
            margin: 0.3rem 0;
            font-size: 0.9em;
        }

        .response-time {
            color: #f59e0b;
            font-weight: 600;
            margin: 0.5rem 0;
        }

        .incident-history {
            margin-top: 3rem;
        }

        .incident-item {
            background: white;
            border-radius: 10px;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #6b7280;
        }

        .incident-item.resolved {
            border-left-color: #10b981;
        }

        .incident-item.monitoring {
            border-left-color: #f59e0b;
        }

        .incident-status {
            background: #6b7280;
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 1rem;
        }

        .incident-item.resolved .incident-status {
            background: #10b981;
        }

        .incident-item.monitoring .incident-status {
            background: #f59e0b;
        }

        .incident-date {
            color: #6b7280;
            font-size: 0.9em;
        }

        .incident-item p {
            margin: 0.5rem 0 0 0;
            color: #374151;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #6b7280;
            grid-column: 1 / -1;
        }

        nav ul li a.active {
            background: #667eea;
            color: white;
            border-radius: 5px;
        }

        @media (max-width: 768px) {
            .status-overview {
                grid-template-columns: 1fr;
            }
            
            .server-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <nav class="container-fluid">
        <ul>
            <li><strong>Warframe Tools</strong></li>
        </ul>
        <ul>
            <li><a href="index.html">üéÅ –ü—Ä–æ–º–æ–∫–æ–¥—ã</a></li>
            <li><a href="status.html" class="active">üîß –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–æ–≤</a></li>
            <li><a href="https://wtc.idominiqe.com" target="_blank">‚è∞ –¢–∞–π–º–µ—Ä—ã</a></li>
            <li><a href="https://github.com/iDominiqe/wtc" target="_blank">‚≠ê GitHub</a></li>
        </ul>
    </nav>

    <main class="container">
        <section class="hero">
            <h1>üîß –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–æ–≤ Warframe</h1>
            <p>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</p>
        </section>

        <div class="status-overview">
            <div class="status-card online">
                <h3>üü¢ –û–Ω–ª–∞–π–Ω</h3>
                <p>–°–µ—Ä–≤–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ</p>
                <small>–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞: <span id="last-check">–∑–∞–≥—Ä—É–∑–∫–∞...</span></small>
            </div>
            
            <div class="status-card response-time">
                <h3>‚ö° –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞</h3>
                <p id="response-time">-- –º—Å</p>
                <small>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞</small>
            </div>
            
            <div class="status-card players">
                <h3>üë• –ò–≥—Ä–æ–∫–∏ –æ–Ω–ª–∞–π–Ω</h3>
                <p id="players-online">--</p>
                <small>–ê–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä–æ–∫–∏</small>
            </div>
        </div>

        <section class="server-list">
            <h2>üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–æ–≤</h2>
            <div id="server-status" class="grid">
                <div class="loading">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤...</div>
            </div>
        </section>

        <section class="incident-history">
            <h2>üìà –ò—Å—Ç–æ—Ä–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</h2>
            <div id="incident-list">
                <div class="incident-item resolved">
                    <span class="incident-status">‚úÖ –†–µ—à–µ–Ω–æ</span>
                    <span class="incident-date">28.09.2024 14:30</span>
                    <p>–ü–ª–∞–Ω–æ–≤–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ - –∑–∞–≤–µ—Ä—à–µ–Ω–æ</p>
                </div>
                <div class="incident-item monitoring">
                    <span class="incident-status">üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</span>
                    <span class="incident-date">25.09.2024 09:15</span>
                    <p>–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="container">
        <small>–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç ‚Ä¢ –ù–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</small>
        <br>
        <small id="status-last-updated">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –∑–∞–≥—Ä—É–∑–∫–∞...</small>
    </footer>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
        const SERVERS = [
            { name: '–õ–æ–≥–∏–Ω —Å–µ—Ä–≤–µ—Ä', url: 'https://warframe.com', region: '–ì–ª–æ–±–∞–ª—å–Ω—ã–π' },
            { name: '–ò–≥—Ä–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä EU', url: 'https://content.warframe.com', region: '–ï–≤—Ä–æ–ø–∞' },
            { name: '–ò–≥—Ä–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä NA', url: 'https://content.origin.warframe.com', region: '–°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞' },
            { name: '–¢–æ—Ä–≥–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞', url: 'https://warframe.market', region: '–ú–∞—Ä–∫–µ—Ç' },
            { name: '–§–æ—Ä—É–º', url: 'https://forums.warframe.com', region: '–§–æ—Ä—É–º' },
            { name: 'Wiki', url: 'https://warframe.fandom.com', region: '–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π' }
        ];

        async function initStatusPage() {
            console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç–∞—Ç—É—Å–∞...');
            updateLastChecked();
            await checkAllServers();
            updatePlayerStats();
            startAutoRefresh();
        }

        function updateLastChecked() {
            const now = new Date();
            const lastCheckElement = document.getElementById('last-check');
            const lastUpdatedElement = document.getElementById('status-last-updated');
            
            if (lastCheckElement) lastCheckElement.textContent = now.toLocaleString('ru-RU');
            if (lastUpdatedElement) lastUpdatedElement.textContent = `–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ${now.toLocaleString('ru-RU')}`;
        }

        async function checkAllServers() {
            const serverList = document.getElementById('server-status');
            if (!serverList) return;
            
            serverList.innerHTML = '<div class="loading">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤...</div>';

            const results = [];
            
            for (const server of SERVERS) {
                const status = await checkServerStatus(server);
                results.push({ ...server, status });
            }

            displayServerStatus(results);
        }

        async function checkServerStatus(server) {
            try {
                const startTime = Date.now();
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–π fetch –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
                const response = await fetch(server.url, { 
                    method: 'GET',
                    mode: 'no-cors'
                });
                const responseTime = Date.now() - startTime;

                return {
                    online: true,
                    responseTime: responseTime,
                    lastChecked: new Date()
                };
            } catch (error) {
                console.log(`–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ ${server.name}:`, error);
                return {
                    online: false,
                    responseTime: null,
                    lastChecked: new Date(),
                    error: error.message
                };
            }
        }

        function displayServerStatus(servers) {
            const serverList = document.getElementById('server-status');
            const overallStatus = document.querySelector('.status-card.online h3');
            
            if (!serverList || !overallStatus) return;
            
            let onlineCount = 0;
            let totalResponseTime = 0;
            let responseCount = 0;

            serverList.innerHTML = servers.map(server => {
                const isOnline = server.status.online;
                const responseTime = server.status.responseTime;
                
                if (isOnline) {
                    onlineCount++;
                    if (responseTime) {
                        totalResponseTime += responseTime;
                        responseCount++;
                    }
                }

                return `
                    <div class="server-card ${isOnline ? 'online' : 'offline'}">
                        <div class="server-header">
                            <h3>${server.name}</h3>
                            <span class="status-indicator ${isOnline ? 'online' : 'offline'}">
                                ${isOnline ? 'üü¢ –û–Ω–ª–∞–π–Ω' : 'üî¥ –û—Ñ–ª–∞–π–Ω'}
                            </span>
                        </div>
                        <p class="server-region">${server.region}</p>
                        ${isOnline && responseTime ? 
                            `<p class="response-time">‚è± ${responseTime} –º—Å</p>` : 
                            '<p class="response-time">‚è± -- –º—Å</p>'
                        }
                        <small>–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: ${server.status.lastChecked.toLocaleTimeString('ru-RU')}</small>
                    </div>
                `;
            }).join('');

            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å
            const overallOnline = onlineCount === SERVERS.length;
            overallStatus.textContent = overallOnline ? 'üü¢ –í—Å–µ —Å–∏—Å—Ç–µ–º—ã –≤ –Ω–æ—Ä–º–µ' : 'üü° –ß–∞—Å—Ç–∏—á–Ω—ã–µ –ø–µ—Ä–µ–±–æ–∏';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
            if (responseCount > 0) {
                const avgResponseTime = Math.round(totalResponseTime / responseCount);
                const responseTimeElement = document.getElementById('response-time');
                if (responseTimeElement) responseTimeElement.textContent = `${avgResponseTime} –º—Å`;
            }
        }

        function updatePlayerStats() {
            const playersOnlineElement = document.getElementById('players-online');
            if (playersOnlineElement) playersOnlineElement.textContent = '45,000+';
        }

        function startAutoRefresh() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∞
            setInterval(() => {
                console.log('–ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤...');
                initStatusPage();
            }, 2 * 60 * 1000);
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –∑–∞–ø—É—Å–∫–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥...');
            initStatusPage();
        });
    </script>
</body>
</html>
